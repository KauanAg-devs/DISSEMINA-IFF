<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imagem com Círculo</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #map {
            height: 100vh;
        }

        #map img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Centraliza a imagem */
        }
    </style>
    <!-- Inclua os arquivos Leaflet CSS e JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>

<!-- Crie um contêiner para o mapa -->
<div id="map"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Inicialize o mapa
        const map = L.map('map').setView([-22.1086, -41.4711], 12);
        // Adicione um Layer do OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // Crie um elemento de imagem
        const img = new Image();
        img.src = 'https://img.nuclearsecrecy.com/nukemap_marker.svg';

        // Adicione a imagem ao contêiner do mapa
        map.getPane('overlayPane').appendChild(img);

        // Inicialize a posição da imagem
        updateImagePosition(map.getCenter());

        // Adicione um evento de clique no mapa
        map.on('click', function (event) {
            // Atualize a posição da imagem quando o mapa for clicado
            updateImagePosition(event.latlng);

            // Remova círculos antigos (se existirem)
            map.eachLayer(layer => {
                if (layer instanceof L.Circle) {
                    map.removeLayer(layer);
                }
            });

            // Adicione um novo círculo ao redor da imagem
            const circle = L.circle(event.latlng, { radius: 3500 }).addTo(map);
            const circle2 = L.circle(event.latlng, { radius: 500, color: 'red',fillColor: 'red', }).addTo(map);

            // Centralize o círculo na imagem
            const imgDimensions = img.getBoundingClientRect();
            circle.setLatLng(map.layerPointToLatLng([event.layerPoint.x - imgDimensions.width]));
            circle2.setLatLng(map.layerPointToLatLng([event.layerPoint.x - imgDimensions.width]));

        });

        // Função para atualizar a posição da imagem
        function updateImagePosition(latlng) {
            const markerPos = map.latLngToLayerPoint(latlng);
            img.style.transform = `translate(${markerPos.x-30}px, ${markerPos.y-75  }px)`;
        }
    });
</script>

</body>
</html>
